<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Chrono</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
</head>
<body>
    <script>
        showInterface = () => {
            //console.log dans une variable
            cl = (e) => {console.log(e)};
            class Chrono{
                constructor(x, y, c, b){
                    this.x=x;
                    this.y=y;
                    this.c=c;
                    this.b=b;
                }
                affiche(){
                    /*div generale*/
                    this.div = document.createElement("div");
                    let div = this.div;
                        div.style.backgroundColor = this.c;
                        div.style.border = `2px solid ${this.b}`;
                        div.style.left = this.x;
                        div.style.top = this.y;
                        div.style.position = "absolute";
                        div.style.width = "160px";
                        div.style.height = "60px";
                        document.body.appendChild(div);
                    /*div input*/
                    let divI = document.createElement("div");
                        div.appendChild(divI);
                    /*input*/
                    let input = document.createElement("input");
                        input.setAttribute("type", "text");
                        input.setAttribute("value", "00 : 00 : 10");
                        input.setAttribute("readOnly", "true");

                        input.style.textAlign = "center";
                        input.style.display="block";
                        input.style.margin = "0 auto";
                        divI.appendChild(input);
                    /*br*/
                    let br = document.createElement("br");
                        div.appendChild(br);
                    /*div button*/
                    let divB = document.createElement("div");
                        divB.style.display = "flex";
                        divB.style.justifyContent = "space-evenly";
                        div.appendChild(divB);
                    /*img stop*/
                    let stopBtn = document.createElement("img");
                        stopBtn.src = "img/stop-button.png";
                        stopBtn.alt = "stop";
                        divB.appendChild(stopBtn);
                    /*img play*/
                    let playBtn = document.createElement("img");
                        playBtn.src = "img/play-button.png";
                        playBtn.alt = "play";
                        divB.appendChild(playBtn);
                    /*img pause*/
                    let pauseBtn = document.createElement("img");
                        pauseBtn.src = "img/pause-button.png";
                        pauseBtn.alt = "pause";
                    /*play-pause Event*/
                    playBtn.onclick = () =>{
                        divB.removeChild(playBtn);
                        divB.appendChild(pauseBtn);
                        }
                    pauseBtn.onclick = () =>{
                        divB.removeChild(pauseBtn);
                        divB.appendChild(playBtn);
                        }
                    stopBtn.onclick = () =>{
                        init();
                        }
                }       
                lecture(){
                    let startTime = 0;
                    let start = 0;
                    let end = 0;
                    let diff = 0;
                    let timerID = 0;
                    chrono = () =>{
                        end = new Date();
                        diff = end - start;
                        diff = new Date(diff);
                        let sec = diff.getSeconds();
                        let min = diff.getMinutes();
                        let hr = diff.getHours()-1;
                        if (min < 10){
                            min = "0" + min;
                        }
                        if (sec < 10){
                            sec = "0" + sec;
                        }
                        document.getElementsByTagName("input").innerHTML = `${hr} : ${min} : ${sec}`;
                        timerID = setInterval("chrono()", 10);
                    }
                    start = new Date();
                    chrono();
                }
                pause(){
                    document.div.divB.pauseBtn.onclick = lecture;
                    divB.removeChild(playBtn);
                    divB.appendChild(pauseBtn);
                    clearInterval(timerID);
                }
                init(){
                    let input = document.getElementsByTagName("input");
                    if(input.value === "00 : 00 : 00"){
                        document.div.divB.stopBtn.onclick = lecture;
                    }else{
                        input.innerHTML = "00 : 00 : 00";
                        start = new Date();
                    }  
                }
            }
            let chrono1 = new Chrono("100px", "200px", "orange", "black");
            chrono1.affiche();
        }
        onload = showInterface;
    </script>
</body>
</html>